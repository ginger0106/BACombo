\section{Background and }


\begin{algorithm}[!t]

\caption{Federated Averaging (FedAvg)}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\begin{algorithmic}[1]
\REQUIRE $K, T, \eta, E, w_0, N, n, n_k, p_k,  k = 1,...,N $

\STATE \textbf{Server executes:}
\FOR {$t = 0, ...,T-1$}
    \STATE server selects a subset $S_t$ of K workers at random (each worker $k$ is chosen with probability $p_k$)
    \STATE send $w_t$ to all chosen workers
    \FOR{each client $k \in S_t$ in parallel}
        \STATE $w^k_{t+1} \leftarrow$ ClientUpdatae$(k,w_{t})$
    \ENDFOR
    \STATE $w_{t+1} \leftarrow \sum ^{K}_{k=1} \frac{n_k}{n}w^k_{t+1}$
\ENDFOR
\item[]


\STATE \textbf{ClientUpdatae}$(k,w_{t})$: //Run on worker $k$
\STATE \quad worker $k$ updates $w_t$ for $E$ epoches of SGD on $F_k$ \\ \quad with step size $\eta$ to obtain $w_{t+1}$
\RETURN $w_{t+1}$ 

\end{algorithmic}	\label{Fedavg} 
\end{algorithm}




\begin{algorithm}[!t]

\caption{BACombo}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\begin{algorithmic}[1]
\REQUIRE $K, T, \eta, E, \widetilde{\mathcal{W}_{0}}, N, S, \epsilon $

\STATE \textbf{Each worker $i$ executes:}
\STATE $ B \leftarrow \mathbf{0} $

\FOR {$t = 0, ...,T-1$}
    \STATE $r_t \leftarrow Random()$ 
    \STATE updates ${\mathcal W}_{t}$ for $E$ epoches of SGD on $F_i$  with step size $\eta$ to obtain ${\mathcal W}_{t+1}$
    \IF{ $r_t < \epsilon $}{
        \STATE $ \{\mathcal{W}_{t,k}^\prime\}, J, \{D_j\} \leftarrow $ \textbf{SegPulling}$(Random(),K, N,i)$
        \STATE update $B$ based on the \textbf{BandwidthPrediction}$(J)$}
    \ELSE {
        \STATE $ \{\mathcal{W}_{t,k}^\prime\}, J, \{D_j\} \leftarrow $ \textbf{SegmentPulling}$(BGreedy(),K, N,i)$
    }
    \ENDIF
    \STATE $\widetilde{\mathcal{W}}_{t+1} \leftarrow$ \textbf{SegAggregation} $(\{\mathcal{W}_{t,k}^\prime\},{{W}}_{t+1},J ,\{D_j\})$
\ENDFOR
\item[]

\end{algorithmic}	\label{Fedavg} 
\end{algorithm}

            % \STATE worker selects a subset $S_{t}$ of S segments at random (each segments $s$ is chosen from  with probability $p_s$)
            
        %             \FOR {$ k = 1, ..., K$}
            
        % \ENDFOR
                % \STATE worker selects a subset $S_{t, s, r}$ of  workers at random (each worker $k$ is chosen with probability $p_k$)